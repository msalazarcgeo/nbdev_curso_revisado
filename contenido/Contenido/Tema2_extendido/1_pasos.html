<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;J. Miguel Salazar">

<title>Curso Nbdeb - Curso Nbdev- Primeros pasos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../figures/icons/course_favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../css/custom_style.css">
<link rel="stylesheet" href="../../../css/syllabus.css">
<meta property="og:title" content="Curso Nbdeb - Curso Nbdev- Primeros pasos">
<meta property="og:description" content="Poniendo las cosas en orden para trabajar">
<meta property="og:site_name" content="Curso Nbdeb">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Curso Nbdeb</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Curso Nbdev- Primeros pasos</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../contenido/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">🏠 Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Contenido</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../contenido/Contenido/Tema1/nbdev_python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Presentación del concepto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../contenido/Contenido/Tema2/Instalacion_rapida.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instalación prerequisitos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../contenido/Contenido/Tema2_extendido/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Nbdev y sus usos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../contenido/Contenido/Tema3/Clusters_ejemplo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Un ejemplo más entretenido Clusters</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#iniciar-un-repositorio-con-github-y-nbdev." id="toc-iniciar-un-repositorio-con-github-y-nbdev." class="nav-link active" data-scroll-target="#iniciar-un-repositorio-con-github-y-nbdev.">Iniciar un repositorio con github y nbdev.</a>
  <ul class="collapse">
  <li><a href="#cómo-me-organizo" id="toc-cómo-me-organizo" class="nav-link" data-scroll-target="#cómo-me-organizo">¿Cómo me organizo ?</a></li>
  <li><a href="#generar-un-repositorio." id="toc-generar-un-repositorio." class="nav-link" data-scroll-target="#generar-un-repositorio.">Generar un repositorio.</a></li>
  <li><a href="#habilitar-github-pages-y-flujos-de-trabajo" id="toc-habilitar-github-pages-y-flujos-de-trabajo" class="nav-link" data-scroll-target="#habilitar-github-pages-y-flujos-de-trabajo">Habilitar Github Pages y flujos de trabajo</a></li>
  <li><a href="#hacer-la-primera-edición" id="toc-hacer-la-primera-edición" class="nav-link" data-scroll-target="#hacer-la-primera-edición">Hacer la primera edición</a>
  <ul class="collapse">
  <li><a href="#antes-de-editar" id="toc-antes-de-editar" class="nav-link" data-scroll-target="#antes-de-editar">Antes de editar</a></li>
  <li><a href="#configurar" id="toc-configurar" class="nav-link" data-scroll-target="#configurar">Configurar</a></li>
  <li><a href="#nbdev-y-jupyter." id="toc-nbdev-y-jupyter." class="nav-link" data-scroll-target="#nbdev-y-jupyter.">Nbdev y Jupyter.</a></li>
  </ul></li>
  <li><a href="#ver-la-documentación" id="toc-ver-la-documentación" class="nav-link" data-scroll-target="#ver-la-documentación">Ver la documentación</a></li>
  <li><a href="#probar-el-módulo" id="toc-probar-el-módulo" class="nav-link" data-scroll-target="#probar-el-módulo">Probar el módulo</a></li>
  <li><a href="#generar-el-módulo" id="toc-generar-el-módulo" class="nav-link" data-scroll-target="#generar-el-módulo">Generar el módulo</a></li>
  <li><a href="#añadir-los-cambios-en-github" id="toc-añadir-los-cambios-en-github" class="nav-link" data-scroll-target="#añadir-los-cambios-en-github">Añadir los cambios en Github</a></li>
  <li><a href="#subir-los-cambios-al-repositorio-de-github" id="toc-subir-los-cambios-al-repositorio-de-github" class="nav-link" data-scroll-target="#subir-los-cambios-al-repositorio-de-github">Subir los cambios al repositorio de github</a>
  <ul class="collapse">
  <li><a href="#instalación-de-la-biblioteca" id="toc-instalación-de-la-biblioteca" class="nav-link" data-scroll-target="#instalación-de-la-biblioteca">Instalación de la biblioteca</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Curso Nbdev- Primeros pasos</h1>
<p class="subtitle lead">Poniendo las cosas en orden para trabajar</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;<a href="#">J. Miguel Salazar</a> </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="iniciar-un-repositorio-con-github-y-nbdev." class="level1">
<h1>Iniciar un repositorio con github y nbdev.</h1>
<section id="cómo-me-organizo" class="level2">
<h2 class="anchored" data-anchor-id="cómo-me-organizo">¿Cómo me organizo ?</h2>
<p>A continuación vamos a poner los pasos que vamos a seguir para crear un ambiente de desarrollo y automatizar todos los procesos.</p>
<ul>
<li><a href="#generar-un-repositorio">Generar un repositorio</a>.</li>
<li><a href="#habilitar-github-pages">Habilitar Github Pages</a>.</li>
<li><a href="#hacer-la-primera-edición">Hacer la primera edición</a>.</li>
<li><a href="#ver-la-documentación">Ver la documnetación local</a></li>
<li><a href="#generar-el-módulo">Construir módulos</a>.</li>
<li><a href="#añadir-los-cambios-en-github">Añadir cambios Github</a></li>
</ul>
</section>
<section id="generar-un-repositorio." class="level2">
<h2 class="anchored" data-anchor-id="generar-un-repositorio.">Generar un repositorio.</h2>
<p>Los repositorios nos permiten mantener un orden en el código y un control de cambios, por la simpleza usaremos <a href="https://github.com">Github</a> donde alojaremos el repositorio de nuestro desarrollo. Para poder crear un repositorio dentro de github sera necesario crear una cuenta dentro del sitio.</p>
<div id="fig-nuevo_rep" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nuevo_rep-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./Images_tem/New_repository.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nuevo_rep-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Nuevo repositorio
</figcaption>
</figure>
</div>
<p>Una vez creado nuestro repositorio se utiliza el siguiente comando para clonar el repositorio de forma local y poder modificarlo tanto de forma local como actualizar los cambies en github.</p>
<pre><code>git clone git@github.com:%nombreusuario/nbdev_prueba.git</code></pre>
<p>Podemos observar que no hay nada dentro del repositorio, incluso cuando se ejecuta el código anterior nos muestra una advertencia que estamos clonando un repositorio vacio.</p>
<pre><code>warning: You appear to have cloned an empty repository.</code></pre>
<p>Nbdev contiene un comando para añadir toda la estructura necesaria para poder generar nuestro paquete junto con su documentación.</p>
<pre><code>nbdev_new</code></pre>
<p>Este comando debera ejecutarse dentro del directorio del repositorio. El comando generará tres subdirectorios:</p>
<ul>
<li>Un subdirectorio con el nombre del repositorio (nbdev_prueba)</li>
<li>nbs</li>
<li><code>_proc</code></li>
</ul>
<p>Y unos archivos</p>
<ul>
<li>License</li>
<li>MANIFEST.in</li>
<li>README.md</li>
<li>settings.ini</li>
<li>setup.py</li>
</ul>
<p>De los anteriores, el que nos interesa es el <code>settings.ini</code> en el cual se controla la mayoría de las cosas dentro de nuestro paquete.</p>
<p>Vamos a modificar nuestro repositorio en github para ver que todo se sincronize y funcione.</p>
<pre><code>$ git add .
$ git commit -m 'Primer commit'
$ git push</code></pre>
<p>Si vamos a nuestro repositorio dentro de Github podemos observar que ya tenemos los archivos y los subdirectorios en Github igual que lo tenemos dentro de nuestros archivos locales Ver <strong>?@fig-nbd-modificado</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Images_tem/nbdev_prueba_modificado.png" class="img-fluid figure-img"></p>
<figcaption>Nuevo repositorio</figcaption>
</figure>
</div>
</section>
<section id="habilitar-github-pages-y-flujos-de-trabajo" class="level2">
<h2 class="anchored" data-anchor-id="habilitar-github-pages-y-flujos-de-trabajo">Habilitar Github Pages y flujos de trabajo</h2>
<p>Una de cosa que nos promete <strong>nbdev</strong> es la generación de documentación, pero es necesario tener un lugar donde se pueda consultar. Un lugar donde podemos tener alojada la documentación es en <a href="https://pages.github.com/">Github Pages</a> la cual nos permite generar un sitio web con la documentación desde el repositorio.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Aunque <strong>nbdev</strong> tiene por defecto el uso de Github Pages esto puede ser modificado y tener alojada la documentación en otra parte.</p>
</div>
</div>
<p>Para habilitar en el repositorio hay que ir a la parte de “Settings” del repositorio y en el menu (Izquierda) en “Pages”. En esta sección se cambia de “Branch” a “gh-pages” y se da click en “Save”.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Images_tem/nbdev_prueba_pages.png" class="img-fluid figure-img"></p>
<figcaption>Nuevo repositorio</figcaption>
</figure>
</div>
<p>La página se encuentra alojada en una dirección similar a <code>https://%nombreusuario.github.io/nbdev_prueba/</code>. Pero primero esta debe ser generada por Github.</p>
<p>Una de las características de Github es que podemos generar ciertas acciones y flujos de trabajo de forma automatizada dentro del repositorio. Estas acciones nos permiten verificar que tanto el código del paquete funcione de manera adecuada, como el despliegue de nuestra documentación se haga de forma correcta. Integrando esto evitamos el desgaste de hacerlo de forma manual.</p>
<p>Cuando nuestra pagina de documentación se encuentre disponible en la pestaña de “Actions” del repositorio podremos ver (✅) en “pages build and deployment”. En caso de que se vea (❌) significa que algo a salido mal.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Images_tem/nbdev_prueba_depoy.png" class="img-fluid figure-img"></p>
<figcaption>Deploy documentacion</figcaption>
</figure>
</div>
<p>Para poder ver la documentación que se creo, nos podemos dirigir a la la cual estará alojada en algo similar a <code>https://%nombreusuario.github.io/nbdev_prueba/</code></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Images_tem/Primer_documentacion.png" class="img-fluid figure-img"></p>
<figcaption>Documentacion</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Integración continua</p>
<p>Al tener todo integrado facilitamos el trabajo del desarrollador, aprovechando el tiempo y librando de tareas que pueden resultar engorrosas y que lleva tiempo realizar.</p>
</div>
</div>
</div>
</section>
<section id="hacer-la-primera-edición" class="level2">
<h2 class="anchored" data-anchor-id="hacer-la-primera-edición">Hacer la primera edición</h2>
<p>Ya que hemos generado un repositorio y hemos modificado las configuraciones para tener la documentación alojada de forma automatica vamos a hacer la primera edición a nuestro paquete.</p>
<section id="antes-de-editar" class="level3">
<h3 class="anchored" data-anchor-id="antes-de-editar">Antes de editar</h3>
<p>Antes de esto vamos a ejecutar el siguiente comando</p>
<pre><code>$ nbdev_install_hooks</code></pre>
<p>Este comando nos permite instalar ciertas extensiones en jupyter Notebook y JupyterLab, las cuales nos permitiran limpiar los notebooks de metadatos que no son necesarios en los repositorios. Y arreglar ciertos elementos de los notebooks los cuales pueden llegar a causar conflictos cuando se hace uso de las acciones de git.</p>
<p>Esto nos ayuda, pues es común que ciertos datos se modifiquen sin haber editato el notebook, esto sucede por el simple hecho de hacer su ejecución o abrir el notebook.</p>
<ul>
<li><p><code>nbdev_merge</code> Nos ayuda a poner los notebooks de forma que al hacer el uso de acciones de <code>pull</code> <code>merge</code>, <code>rebase</code> o <code>stash</code> dentro de git, no modifiquen los notebooks y estos se puedan ejecutar entre los colaboradores del repositorio.</p></li>
<li><p><code>nbdev_clean</code> Los notebooks de Jupyter incluyen muchos metadatos que no se llevan bien con sistemas de control como git. Por tal motivo nbdev installa un “hook” el cual elimina estos metadatos o los remplaza por versiones genéricas que no afectan la ejecución o visualizaciones dentro del notebook.</p></li>
<li><p><code>nbdev_trust</code> Un efecto secundario que se tiene al hacer uso de los notebooks de Jupiter es que estos no funcionan dentro de repositorios compartidos. La razón es que estos pueden ejecutar código HTML o código de JavaScript el cual puede llegar a contener codigo malicioso. Por tal motivo el comportamiento por defecto de los notebooks de Jupyter es preguntar si se puede confiar en el notebook cada vez que se abre esto puede ser una problemática en el flujo de trabajo por tal motivo se puede correr <code>nbdev_trust</code> para evitar que cada vez que se abre un notebook pregunte si es de confianza.</p></li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Advertencia</strong></p>
<p>No se debe de usar los hooks de nbdev dentro de un repositorio que no se confie.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Los hook de nbdev funcionan para cualquier repositorio, sin importar si se usa nbdev o no para generar un paquete o biblioteca.</p>
</div>
</div>
</div>
</section>
<section id="configurar" class="level3">
<h3 class="anchored" data-anchor-id="configurar">Configurar</h3>
<p>Nbdev es muy modificable, esto se encuentra dentro del archivo <code>settings.ini</code>. Para crear el archivo se puede ejecutar <code>nbdev_create_config</code>.</p>
</section>
<section id="nbdev-y-jupyter." class="level3">
<h3 class="anchored" data-anchor-id="nbdev-y-jupyter.">Nbdev y Jupyter.</h3>
<p>Abrimos el archivo <code>nbs/00_core.ipynb</code>, el cual se generó cuando ejecutamos <code>nbdev_new</code>. Dentro de éste se pueden observar las directrizes más importantes para generar un documento que nos servira para poder hacer tanto nuestro paquete, la documentación y su empaquetado.</p>
<p>Expliquemos el comportamiento de las celdas que se encuentran dentro de este notebook.</p>
<p>La primera celda contiene</p>
<pre><code># core

&gt; Fill in a module description here</code></pre>
<p>aquí definimos que el módulo a crear se llamara <code>core</code> y la descripción del mismo. La celda contiene un encabezado H1 de Markdown <code>#</code>y una cita de Markdown donde se describe el módulo.</p>
<p>La segunda celda</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| default_exp core</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>es una directriz en la cual se decide el módulo al cual el notebook exportará lo que se desee. Como se encuentra se exporta al módulo <code>core</code>.</p>
<p>En la siguiente celda</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| hide</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nbdev.showdoc <span class="im">import</span> <span class="op">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>la directriz <code>#| hide</code> nos dice que esta celda no parecerá y tampoco la salida de la misma. Esto nos sirve para poder hacer ciertas pruebas pero que no se desean que sean exportadas ni que sean parte de la documentación.</p>
<p>En la celda siguiente</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| export</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> foo(): <span class="cf">pass</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>la directriz <code>#| export</code> exportará el contenido de la celda al módulo.</p>
<p>La última celda</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| hide</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nbdev<span class="op">;</span> nbdev.nbdev_export()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>usa la directriz <code>#| hide</code> para ocultar el código y la salida de la celda, lo que se ejecuta dentro de la celda es lo que permite exportar lo que se indicó dentro del notebook al módulo.</p>
<p>Vamos a modificar este notebook para hacer un módulo con funciones sencillas.</p>
<p>Agregamos la siguiente celdas antes de la última celda en el notebook sin editar.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| export</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saludo():</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Imprime Hola"""</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Hola!'</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>saludo()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| export</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saludo_a(to):</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Imprime hola a un nombre"""</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Hola!'</span>, to)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Espero que te encuentres bien'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>saludo_a(<span class="st">'Raul'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>show_doc(saludo_a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Las celdas sin la directriz <code>#| export</code> nos pueden servir para probar las funcionalidades dentro del módulo o bien para ser parte de la documentación como ejemplos. En la celda se utiliza la función <code>show_doc</code> nos sirve para mostrar el uso de la cocumentación iterna de la función <code>saludo_a</code> esta nos sirve para generar una documentación precisa.</p>
<p>Ahora podemos executar todo el notebook usando el boton ⏩ dentro de jupyterlab. Si todo funciona correctamente podemos generar la documentación, hacer pruebas y exportar a un módulo.</p>
</section>
</section>
<section id="ver-la-documentación" class="level2">
<h2 class="anchored" data-anchor-id="ver-la-documentación">Ver la documentación</h2>
<p>Para poder ver la documentación de forma local se executa el siguiente comando desde el folder del repositorio</p>
<pre><code>$ nbdev_preview</code></pre>
<p>El comando construye la documentación usando los noteboooks que se encuentran dentro del directorio ‘nbs/’. Y genera un servicio de pagina web de forma local a la cual podemos acceder desde nuestro navegador.</p>
<p>La configuración se puede controlar desde el archivo <code>settings.ini</code> y por defecto toma a ‘nbs/index.ipynb’ como la pagina principal. A la izquierda nos muestra una columna donde podemos ir a la documentación del modulo “core”. Podremos observar que se encuentran las modificaciónes que se hicieron al módulo.</p>
<p>Si se mantiene en servicio la página es posible ver los cambios que se hacen con cierto retraso.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Images_tem/Modificacion_documentacion.png" class="img-fluid figure-img"></p>
<figcaption>Documentacion Modificada</figcaption>
</figure>
</div>
</section>
<section id="probar-el-módulo" class="level2">
<h2 class="anchored" data-anchor-id="probar-el-módulo">Probar el módulo</h2>
<p>Para probar que el todos los elementos del módulo funciona de forma correcta y si alguna modificación hecha no afecta en el desempeño de los componentes de los módulos en nuestro proyecto se utiliza el siguiente comando</p>
<pre><code>$ nbdev_test</code></pre>
<p>Si todo esta correcto en la consola se desplegara</p>
<pre><code>Success.</code></pre>
<p>En caso contrario se muestran los errores y se especifica los notebook en donde se encuentran.</p>
<p><code>nbdev_test</code> puede usarse para probar de manera individual los notebooks</p>
<pre><code>$ nbdev_test --path notebook.ipynb</code></pre>
<p>O para todo un directorio</p>
<pre><code>$ nbdev_test --path tests/</code></pre>
</section>
<section id="generar-el-módulo" class="level2">
<h2 class="anchored" data-anchor-id="generar-el-módulo">Generar el módulo</h2>
<p>Para generar la documentación, desde la linea de comandos en el directorio de nuestro repositorio se llama el comando:</p>
<pre><code>$ nbdev_export</code></pre>
<p>Este comando genera nuestro módulo ‘core’ el cual se encontrará dentro del directorio ‘nbdev_prueba’. Si se desea se pueda abrir el archivo <code>core.py</code> el cual contiene una leyenda</p>
<pre><code>&gt;  # AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/00_core.ipynb.</code></pre>
<p>informando que el archivo fue autogenerado y que cualquier modificación debe de hacerse dentro del notebook <code>nbs/00_core.ipynb</code>.</p>
<p>En <code>core.py</code> podemos ver que se encuentran las funciones definidas dentro del notebook en las celdas con la directriz <code>#| export</code>.</p>
<p>El módulo generado forma parte de la nuestro proyecto.</p>
<p>Por defecto al ejecutar <code>nbdev_export</code> se puede hacer sobre todos los notebooks del projecto. También se puede hacer sobre un notebook en específico.</p>
<pre><code>nbdev_export --path notebook.ipynb</code></pre>
<p>o un directorio</p>
<pre><code>nbdev_export --path dir/</code></pre>
<p>Esto solo sucedera si al principio del notebook se añade la directriz <code>#| default_exp core</code> al principio del notebook.</p>
</section>
<section id="añadir-los-cambios-en-github" class="level2">
<h2 class="anchored" data-anchor-id="añadir-los-cambios-en-github">Añadir los cambios en Github</h2>
<p>Para mantener el código usando Github limpiamos los notebooks con</p>
<pre><code>$ nbdev_clean</code></pre>
<p>El comportamiento usual es limpiar todos los notebook que se encuentran en el directorio declarado en el archivo <code>settings.ini</code> en la parte de nbdev <code>nbs_path = nbs</code> pero también puede se puede limpiar un solo notebook</p>
<pre><code>$ nbdev_clean --fname notebook.ipynb</code></pre>
<p>Tambien podemos ejecutar</p>
<pre><code>$ nbdev_readme </code></pre>
<p>el cual actualiza el <code>Readme.md</code> del repositorio.</p>
</section>
<section id="subir-los-cambios-al-repositorio-de-github" class="level2">
<h2 class="anchored" data-anchor-id="subir-los-cambios-al-repositorio-de-github">Subir los cambios al repositorio de github</h2>
<p>Ya podemos hacer los ‘commits’ y ‘push’ a los cambios en el repositorio para que estos se actualizen en Github. Nbdev nos da un comando para hacer todo para disminuir el tiempo para los cambios. Esto se puede hacer usando</p>
<pre><code>$ nbdev_prepare </code></pre>
<p>el cual exporta, prueba, limpia los notebooks y modifica el <code>README</code> del repositorio</p>
<pre class="console"><code>$ git add .
$ git commit -m 'El primer commit con modificaciones' # Cambie el texto por el que se desee
$ git push</code></pre>
<section id="instalación-de-la-biblioteca" class="level3">
<h3 class="anchored" data-anchor-id="instalación-de-la-biblioteca">Instalación de la biblioteca</h3>
<p>La biblioteca se puede añadir a PIP o Anaconda en cualquiera de los casos es necesario tener una cuenta para hacer estas acciones.</p>
<p>En este caso se dan los pasos para hacer las instalación desde github usando pip install.</p>
<pre><code>pip install "Nombre" @ git+"URL del repositorio"</code></pre>
<p>En nuestro caso</p>
<pre><code>pip install nbdev-prueba@git+https://github.com/"Nombre_usuario_github"/nbdev_prueba</code></pre>
<p>De esta forma ya tenemos la biblioteca instalada dentro de nuestro ambiente de python. Para ver esto podemos abrir una terminal de python e importar el módulo core de nuestra biblioteca.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nbdev_prueba <span class="im">import</span> core</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>core.saludo_a(<span class="st">'Juan'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Y obtenemos como resultado</p>
<pre><code>Hola! Juan
Espero que te encuentres bien</code></pre>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/(?:lse-dsi\.github\.io\/|localhost)");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, CentroGeo</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>